<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Home</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="stylesheet" href="index.css" />        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="topScheduleBar"></div>
        <div id="topNavBar">
            <div class="m_navButton">
                <div id="korean"class="navButton">êµ­ì–´</div>
                <div id="math"class="navButton">ìˆ˜í•™</div>
                <div id="science"class="navButton">ê³¼í•™</div>
            </div>
            <div class="m_navButton">
                <div id="english_R"class="navButton">ì˜ì–´-Red</div>
                <div id="english_B"class="navButton">ì˜ì–´-Blue</div>
                <div id="moral"class="navButton">ë„ë•</div>
            </div>
            <div class="m_navButton">
                <div id="tech_and_house"class="navButton">ê¸°ê°€</div>
                <div id="chinese"class="navButton">í•œë¬¸</div>
                <div id="dev_log"class="navButton">ê°œë°œ ì¼ì§€</div>
            </div>
        </div>
        <div id="mainContents"></div>
        <script>
            $(".m_navButton div").click(function(e) {
                    $(".m_navButton div").removeClass("selected").addClass("navButton");
                    $(this).addClass("selected").removeClass("navButton");
                    let menu = $(this).attr('id');
                    if(menu === "english_R"){
                        getContents(menu);
                    }else{
                        $("#mainContents").html(`ì—¬ëŸ¬ë¶„ë“¤ì˜ ë©‹ì§„ ìë£Œë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš” ğŸ˜ƒ`);
                    }
                    e.preventDefault();     
                }            
            );
                
            function getContents(menu){
                $("#mainContents").html("");
                $.getJSON(`./${menu}.json`, function(data){
                    for(key in data){
                        console.log("key")
                        const div = document.createElement("div");
                        div.setAttribute("id", key);
                        div.classList.add("contDiv")
                        const img = document.createElement("img");
                        img.src = key;
                        img.classList.add("contImg")
                        const text = document.createElement("div");
                        text.id=`${key}_text`;
                        text.classList.add("contText");
                        text.append("ì‘ì„±ì : "+data[key].ì‘ì„±ì);
                        text.append(" / ìœ í˜• : "+data[key].ìœ í˜•);
                        text.append(" / ë“±ë¡ì¼ì : "+data[key].ë“±ë¡ì¼ì);
                        console.log(key)
                        document.getElementById("mainContents").appendChild(div);
                        document.getElementById(key).appendChild(img);
                        document.getElementById(key).appendChild(text);
                        console.log(key)
                    }                    
                        })
            }
            $(document).ready(function(){
                getEvent()
                write()
            })
            function write(){
                $.getJSON("./event.json", function(data){
                    let i = 0;
                    for(key in data.comingEvent){
                        $("#mainContents").append(`${++i}. ${key} - ${data.comingEvent[key]}<br>`);
                    }
                })
            }

            // ì¼ì • ë¡¤ë§
            function getEvent(){
                var i = 0;
                var result = [];
                $.getJSON("./event.json", function(data){
                    for(j in data.comingEvent){
                        result.push([`${j} - ${data.comingEvent[j]}`]);
                    }
                    $("#topScheduleBar").text("Loading");
                    setInterval(function() {
                        $("#topScheduleBar").text(result[i]);
                        if (i == result.length-1)
                            i=0;
                        else
                            i++;
                    }, 4 * 1000);
                }).fail(function(){
                    $("topScheduleBar").text("Error");
                })
            }
        </script>
    </body>
</html>